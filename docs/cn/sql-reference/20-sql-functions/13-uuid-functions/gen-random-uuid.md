---
title: GEN_RANDOM_UUID
---

从版本 1.2.658 开始，生成基于版本 7 的随机 UUID。在此之前，该函数生成的是基于版本 4 的 UUID。

## 语法

```sql
GEN_RANDOM_UUID()
```

## 别名

- [UUID](uuid.md)

## 为什么使用 UUID v7？

- **基于时间排序**：UUID v7 包含时间戳，允许按创建时间对事件或记录进行时间顺序排序。这在需要跟踪操作序列时特别有用。
  
- **时间顺序排序**：UUID v7 确保 UUID 按创建时间排序，这对于需要按时间排序事件的场景（如事件日志记录或维护审计跟踪）非常理想。

## 版本信息

- 版本 1.2.658 及更高版本：UUID 版本从 v4 升级到 v7。
- 版本 1.2.658 之前：UUID 生成基于 v4。

## 示例

在记录事件的应用程序中，保持正确的操作顺序至关重要。UUID v7 确保每个事件按时间顺序排列，从而轻松按时间顺序跟踪操作。

```sql
-- 记录用户登录
SELECT GEN_RANDOM_UUID(), '用户登录' AS 事件, CURRENT_TIMESTAMP AS 事件时间;

-- 记录用户购买
SELECT GEN_RANDOM_UUID(), '用户购买' AS 事件, CURRENT_TIMESTAMP AS 事件时间;
```

这些查询的结果可能如下所示：
```sql
┌──────────────────────────────────────────────────────────────────────────────────────────┐
│           gen_random_uuid()          │         事件        │         事件时间         │
├──────────────────────────────────────┼──────────────────────┼────────────────────────────┤
│ 019329e6-26a2-7b01-b9f5-1c3c02600578 │ 用户登录       │ 2024-11-14 08:59:29.313906 │
│ 019329e6-329e-73c3-b0a8-a413ce298607 │ 用户购买 │ 2024-11-14 08:59:32.381497 │
└──────────────────────────────────────────────────────────────────────────────────────────┘
```

请注意，`gen_random_uuid()` 值是按事件发生的顺序生成的，这使得按时间顺序维护变得容易。